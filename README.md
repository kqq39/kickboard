# 공유 킥보드 서비스

## 시나리오

### 기능적 요구 사항

1. 고객이 이용권을 구매한다.
2. 고객이 이용권을 결제한다.
3. 고객이 이용권을 사용하여 킥보드를 대여한다.
4. 고객이 킥보드를 대여하면 알림 메시지를 전송한다.
5. 고객이 킥보드 이용을 마치면 반납을 한다.
6. 고객이 킥보드를 반납하면 알림 메시지를 전송한다.
7. 관리자는 킥보드를 관리하여 등록/삭제할 수 있다.

### 비기능적 요구 사항

1. 트랜잭션 
   - 고객은 이용권 결제가 완료되어야 킥보드 대여가 가능하다.(Sync)

2. 장애격리
   - 킥보드 대여/반납을 24시간 가능하다.(Async 호출-event-driven)
   - 결제 시스템이 과중되면 결제를 받지 않고 결제를 잠시 후에 하도록 유도한다. (Circuit breaker, fallback)

3. 성능
   - 고객이 구매한 이용권의 잔여를 확인할 수 있다 (CQRS)
   - 킥보드 대여 상태가 변경되면 고객에게 알림 메시지를 전송한다 (Event Driven)

### As-Is 조직구조 – Horizontal
![image](https://user-images.githubusercontent.com/87048759/130189294-e7a97d1e-de5f-49af-84c4-c02235119c5f.png)

### To-Be 조직구조 – Vertical
![image](https://user-images.githubusercontent.com/87048759/130189510-a583a7a1-63b6-4ce5-93a1-3e12d2677814.png)


